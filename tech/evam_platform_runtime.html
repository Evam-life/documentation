
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="lang:clipboard.copy" content="Copy to clipboard">
  <meta name="lang:clipboard.copied" content="Copied to clipboard">
  <meta name="lang:search.language" content="en">
  <meta name="lang:search.pipeline.stopwords" content="True">
  <meta name="lang:search.pipeline.trimmer" content="True">
  <meta name="lang:search.result.none" content="No matching documents">
  <meta name="lang:search.result.one" content="1 matching document">
  <meta name="lang:search.result.other" content="# matching documents">
  <meta name="lang:search.tokenizer" content="[\s\-]+">

  
    <link href="https://fonts.gstatic.com/" rel="preconnect" crossorigin>
    <link href="https://fonts.googleapis.com/css?family=Roboto+Mono:400,500,700|Roboto:300,400,400i,700&display=fallback" rel="stylesheet">

    <style>
      body,
      input {
        font-family: "Roboto", "Helvetica Neue", Helvetica, Arial, sans-serif
      }

      code,
      kbd,
      pre {
        font-family: "Roboto Mono", "Courier New", Courier, monospace
      }
    </style>
  

  <link rel="stylesheet" href="../_static/stylesheets/application.css"/>
  <link rel="stylesheet" href="../_static/stylesheets/application-palette.css"/>
  <link rel="stylesheet" href="../_static/stylesheets/application-fixes.css"/>
  
  <link rel="stylesheet" href="../_static/fonts/material-icons.css"/>
  
  <meta name="theme-color" content="#3f51b5">
  <script src="../_static/javascripts/modernizr.js"></script>
  
  
  
    <title>Evam platform runtime &#8212; Evam developer SDK  documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Getting started" href="getting_started.html" />
    <link rel="prev" title="Development environment" href="development_environment.html" />
  
   

  </head>
  <body dir=ltr
        data-md-color-primary=white data-md-color-accent=blue>
  
  <svg class="md-svg">
    <defs data-children-count="0">
      
      <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
      
    </defs>
  </svg>
  
  <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer">
  <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search">
  <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
  <a href="#tech/evam_platform_runtime" tabindex="1" class="md-skip"> Skip to content </a>
  <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex navheader">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../index.html" title="Evam developer SDK  documentation"
           class="md-header-nav__button md-logo">
          
              <img src="../_static/evam-black.png" height="26"
                   alt="Evam developer SDK documentation logo">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          <span class="md-header-nav__topic">Evam developer SDK  documentation</span>
          <span class="md-header-nav__topic"> Evam platform runtime </span>
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
        
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" action="../search.html" method="get" name="search">
      <input type="text" class="md-search__input" name="q" placeholder=""Search""
             autocapitalize="off" autocomplete="off" spellcheck="false"
             data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>

      </div>
      
      
  
  <script src="../_static/javascripts/version_dropdown.js"></script>
  <script>
    var json_loc = "../"versions.json"",
        target_loc = "../../",
        text = "Versions";
    $( document ).ready( add_version_dropdown(json_loc, target_loc, text));
  </script>
  

    </div>
  </nav>
</header>

  
  <div class="md-container">
    
    
    
  <nav class="md-tabs" data-md-component="tabs">
    <div class="md-tabs__inner md-grid">
      <ul class="md-tabs__list">
          <li class="md-tabs__item"><a href="../index.html" class="md-tabs__link">Evam developer SDK  documentation</a></li>
      </ul>
    </div>
  </nav>
    <main class="md-main">
      <div class="md-main__inner md-grid" data-md-component="container">
        
          <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../index.html" title="Evam developer SDK documentation" class="md-nav__button md-logo">
      
        <img src="../_static/evam-black.png" alt=" logo" width="48" height="48">
      
    </a>
    <a href="../index.html"
       title="Evam developer SDK documentation">Evam developer SDK  documentation</a>
  </label>
  

  
  <ul class="md-nav__list">
    <li class="md-nav__item">
    
    
      <a href="../design_guidelines/Design-Guidelines.html" class="md-nav__link">Design guidelines</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="deployment.html" class="md-nav__link">Deployment</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="development_environment.html" class="md-nav__link">Development environment</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    <label class="md-nav__link md-nav__link--active" for="__toc"> Evam platform runtime </label>
    
      <a href="#" class="md-nav__link md-nav__link--active">Evam platform runtime</a>
      
        
<nav class="md-nav md-nav--secondary">
    <label class="md-nav__title" for="__toc">"Contents"</label>
  <ul class="md-nav__list" data-md-scrollfix="">
        <li class="md-nav__item"><a href="#tech-evam-platform-runtime--page-root" class="md-nav__link">Evam platform runtime</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#overview" class="md-nav__link">Overview</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#local-web-server" class="md-nav__link">Local web server</a>
        </li>
        <li class="md-nav__item"><a href="#certified-app-lifecycle" class="md-nav__link">Certified app lifecycle</a>
        </li>
        <li class="md-nav__item"><a href="#grpc-proxy" class="md-nav__link">gRPC proxy</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#recommendations" class="md-nav__link">Recommendations</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#error-tracking" class="md-nav__link">Error tracking</a>
        </li>
        <li class="md-nav__item"><a href="#communication-with-backend-servers" class="md-nav__link">Communication with backend servers</a>
        </li></ul>
            </nav>
        </li></ul>
            </nav>
        </li>
  </ul>
</nav>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="getting_started.html" class="md-nav__link">Getting started</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="hardware_apis.html" class="md-nav__link">Hardware APIs</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="sideloading.html" class="md-nav__link">Sideloading your application</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="using_the_sdk.html" class="md-nav__link">Using the Evam SDK</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="vehicle_services_build_flavour.html" class="md-nav__link">Vehicle Services Build Flavour</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../api/modules.html" class="md-nav__link">SDK reference</a>
      
    
    </li>
  </ul>
  

</nav>
              </div>
            </div>
          </div>
          <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                
<nav class="md-nav md-nav--secondary">
    <label class="md-nav__title" for="__toc">"Contents"</label>
  <ul class="md-nav__list" data-md-scrollfix="">
        <li class="md-nav__item"><a href="#tech-evam-platform-runtime--page-root" class="md-nav__link">Evam platform runtime</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#overview" class="md-nav__link">Overview</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#local-web-server" class="md-nav__link">Local web server</a>
        </li>
        <li class="md-nav__item"><a href="#certified-app-lifecycle" class="md-nav__link">Certified app lifecycle</a>
        </li>
        <li class="md-nav__item"><a href="#grpc-proxy" class="md-nav__link">gRPC proxy</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#recommendations" class="md-nav__link">Recommendations</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#error-tracking" class="md-nav__link">Error tracking</a>
        </li>
        <li class="md-nav__item"><a href="#communication-with-backend-servers" class="md-nav__link">Communication with backend servers</a>
        </li></ul>
            </nav>
        </li></ul>
            </nav>
        </li>
  </ul>
</nav>
              </div>
            </div>
          </div>
        
        <div class="md-content">
          <article class="md-content__inner md-typeset" role="main">
            
  <section id="evam-platform-runtime">
<h1 id="tech-evam-platform-runtime--page-root">Evam platform runtime<a class="headerlink" href="#tech-evam-platform-runtime--page-root" title="Permalink to this heading">¶</a></h1>
<p>This article describes the environment a certified app is running within when installed in the Evam platform (either through production deployment or sideloading).</p>
<section id="overview">
<h2 id="overview">Overview<a class="headerlink" href="#overview" title="Permalink to this heading">¶</a></h2>
<p>Your certified app is running within an Android webview. It is served from a local web server and using the Evam SDK as part of your certified app allows it to call the various APIs made available to interact with the Evam platform’s Native side.</p>
<p>Additionally, a gRPC proxy is integrated in the Native side to allow for an easy use of <code class="docutils literal notranslate"><span class="pre">grpc-web</span></code> as part of your certified app.</p>
<p><img alt="Overview" src="../_images/Evam_platform_runtime_overview.png"/></p>
<section id="local-web-server">
<h3 id="local-web-server">Local web server<a class="headerlink" href="#local-web-server" title="Permalink to this heading">¶</a></h3>
<p>Building a certified application using the Evam SDK results in a package consisting of Single Page Application (SPA). The local web server is handling the serving of all files this SPA is consisting of, for exclusive use by the Webview associated to your certified app.</p>
<p>The behaviour of this local web server is not customizable, its only function is to serve the application files.</p>
<p>The URL associated to your certified application is following this schema:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">https</span><span class="p">:</span><span class="o">//&lt;</span><span class="n">APP_SLUG</span><span class="o">&gt;.</span><span class="n">microapp</span><span class="o">.</span><span class="n">device</span><span class="o">-</span><span class="n">local</span><span class="o">.</span><span class="n">evam</span><span class="o">.</span><span class="n">life</span><span class="o">/</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">&lt;APP_SLUG&gt;</span></code> is determined by the ID of your application. For instance, if your app ID is <code class="docutils literal notranslate"><span class="pre">com.example.application</span></code>, then the <code class="docutils literal notranslate"><span class="pre">&lt;APP_SLUG&gt;</span></code> will be <code class="docutils literal notranslate"><span class="pre">application.example.com</span></code>. As a result, the internal URL of the application will be:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">application</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span><span class="o">.</span><span class="n">microapp</span><span class="o">.</span><span class="n">device</span><span class="o">-</span><span class="n">local</span><span class="o">.</span><span class="n">evam</span><span class="o">.</span><span class="n">life</span><span class="o">/</span>
</pre></div>
</div>
<p>The DNS server for the domain <code class="docutils literal notranslate"><span class="pre">microapp.device-local.evam.life</span></code> is handled locally, and the local web server uses a TLS certificate trusted by the webview. Thanks to this, the secure context is available. Read more about <a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/Security/Secure_Contexts">Secure Contexts here</a>.</p>
</section>
<section id="certified-app-lifecycle">
<h3 id="certified-app-lifecycle">Certified app lifecycle<a class="headerlink" href="#certified-app-lifecycle" title="Permalink to this heading">¶</a></h3>
<p>When Vehicle Services starts, all certified apps that are installed in the device are set to start automatically. This means the <code class="docutils literal notranslate"><span class="pre">index.html</span></code>  and its resources will be automatically loaded even if the end user does not open the certified application, enabling “background” routines that you add into the certified application to always run.</p>
</section>
<section id="grpc-proxy">
<h3 id="grpc-proxy">gRPC proxy<a class="headerlink" href="#grpc-proxy" title="Permalink to this heading">¶</a></h3>
<div class="admonition-coming-soon admonition">
<p class="admonition-title">Coming Soon</p>
<p>This feature is currently unavailable but its API has been finalized and will be released soon.</p>
</div>
<p>gRPC is a modern and high-performance Remote Procedure Call (RPC) framework that has enjoyed increasing popularity over the past years.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">grpc-web</span></code> library is available for your certified application to use.</p>
<p>This library requires a proxy to function properly since gRPC relies on HTTP/2, which is not available in web browsers (Android Webview included). Typically, this means a proxy such a Envoy must be used to allow a web application to communicate with a gRPC backend server.</p>
<p>The Evam platform integrates a gRPC proxy that can be used to communicate with any gRPC backend. Each certified application gets exclusive access to an instance of this proxy, specified using the <code class="docutils literal notranslate"><span class="pre">getGRPC()</span></code> method.</p>
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span><span class="w"> </span><span class="nx">evamApi</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">EvamApi</span><span class="p">();</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">grpcAddress</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">evamApi</span><span class="p">.</span><span class="nx">getGRPC</span><span class="p">();</span><span class="w">  </span><span class="c1">// use this as address for grpc-web clients</span>

<span class="c1">// An example gRPC client from https://grpc.io/docs/platforms/web/basics/</span>
<span class="c1">// Use this field to specify the target</span>
<span class="kd">let</span><span class="w"> </span><span class="nx">metadata</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="s1">'evam-target-backend'</span><span class="o">:</span><span class="w"> </span><span class="s2">"https://backend.example.com/"</span><span class="p">}</span>
<span class="kd">let</span><span class="w"> </span><span class="nx">echoService</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">EchoServiceClient</span><span class="p">(</span><span class="nx">grpcAddress</span><span class="p">,</span><span class="w"> </span><span class="nx">metadata</span><span class="p">)</span>

<span class="c1">// Create request</span>
<span class="kd">var</span><span class="w"> </span><span class="nx">request</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">EchoRequest</span><span class="p">();</span>
<span class="nx">request</span><span class="p">.</span><span class="nx">setMessage</span><span class="p">(</span><span class="s1">'Hello World!'</span><span class="p">);</span>

<span class="c1">// Make unary call</span>
<span class="nx">echoService</span><span class="p">.</span><span class="nx">echo</span><span class="p">(</span><span class="nx">request</span><span class="p">,</span><span class="w"> </span><span class="p">{},</span><span class="w"> </span><span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span><span class="w"> </span><span class="nx">response</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">// ...</span>
<span class="p">});</span>
</pre></div>
</div>
<p>As a result, you do not need to setup any gRPC proxy to communicate with your gRPC backend server.</p>
<p>The gRPC proxy will always use TLS negotiation, attempting to connect to an insecure backend is not supported due to security concerns.</p>
</section>
</section>
<section id="recommendations">
<h2 id="recommendations">Recommendations<a class="headerlink" href="#recommendations" title="Permalink to this heading">¶</a></h2>
<p>Here is a set of recommendations to make your certified app deployment a success.</p>
<section id="error-tracking">
<h3 id="error-tracking">Error tracking<a class="headerlink" href="#error-tracking" title="Permalink to this heading">¶</a></h3>
<p>The Evam platform only tracks the minimum set of health-related metrics within the platform to safeguard the privacy of end users’ data. This means errors within certified apps are neither stored within the device nor pushed to some cloud service by design without explicit user action.</p>
<p>If your application and the data it handles are compatible with it, we recommend you use an error tracking service such as <a class="reference external" href="https://sentry.io/">Sentry</a> to monitor potential errors in the field and other relevant metrics.</p>
<p>Make sure to be mindful about the content of the data sent over such service.</p>
</section>
<section id="communication-with-backend-servers">
<h3 id="communication-with-backend-servers">Communication with backend servers<a class="headerlink" href="#communication-with-backend-servers" title="Permalink to this heading">¶</a></h3>
<p>As part of your deployment in end users’ vehicles, you may need to setup other services (physical or not) that may need to be accessed by your certified application. This can typically be some server application running in a computer within the local network of the end user vehicle.</p>
<p>Regardless of the security context of this local network (use of Wi-Fi passwords, RADIUS, etc), we recommend you always secure your communication using TLS and do not rely on plain text. Your certified application runtime environment is a secure context which means plain HTTP calls (as opposed to HTTPS) will fail by design.</p>
<p>Additionally, relying on self-signed certificates is not supported and it is expected that any peer server has a valid certificate signed by a trusted certificate authority prior to any communication being possible. In particular, pay attention to server name validation as it is required.</p>
</section>
</section>
</section>


          </article>
        </div>
      </div>
    </main>
  </div>
  <footer class="md-footer">
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
          
            <a href="development_environment.html" title="Development environment"
               class="md-flex md-footer-nav__link md-footer-nav__link--prev"
               rel="prev">
              <div class="md-flex__cell md-flex__cell--shrink">
                <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
              </div>
              <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
                <span class="md-flex__ellipsis">
                  <span
                      class="md-footer-nav__direction"> "Previous" </span> Development environment </span>
              </div>
            </a>
          
          
            <a href="getting_started.html" title="Getting started"
               class="md-flex md-footer-nav__link md-footer-nav__link--next"
               rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title"><span
                class="md-flex__ellipsis"> <span
                class="md-footer-nav__direction"> "Next" </span> Getting started </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink"><i
                class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          
        </a>
        
      </nav>
    </div>
    <div class="md-footer-meta md-typeset">
      <div class="md-footer-meta__inner md-grid">
        <div class="md-footer-copyright">
          <div class="md-footer-copyright__highlight">
              &#169; Copyright 2023, Evam.
              
          </div>
            Created using
            <a href="http://www.sphinx-doc.org/">Sphinx</a> 5.1.1.
             and
            <a href="https://github.com/bashtage/sphinx-material/">Material for
              Sphinx</a>
        </div>
      </div>
    </div>
  </footer>
  <script src="../_static/javascripts/application.js"></script>
  <script>app.initialize({version: "1.0.4", url: {base: ".."}})</script>
  </body>
</html>